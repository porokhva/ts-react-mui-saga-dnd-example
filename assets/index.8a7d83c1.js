var me=Object.defineProperty,fe=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var te=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&te(e,r,t[r]);if(E)for(var r of E(t))re.call(t,r)&&te(e,r,t[r]);return e},A=(e,t)=>fe(e,ge(t));var j=(e,t)=>{var r={};for(var o in e)ne.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&E)for(var o of E(e))t.indexOf(o)<0&&re.call(e,o)&&(r[o]=e[o]);return r};import{r as l,u as ye,g as xe,j as n,D as Ce,H as ve,h as K,i as V,k as Le,m as De,n as Ie,p as be,o as Se,q as Te,t as se,v as B,w as Y,x as P,y as v,z as F,A as C,B as ke,C as Ae,E as Me,F as we,P as _e,G as Oe,I as p,T as Ne,J as Re,K as Pe,L as _,M as Be,N as Ue,O as Ee,Q as Fe,R as $e,S as He,U as x,V as M,W as R,X as q,Y as je,Z as qe,_ as O,$ as Ke,a0 as ce,a1 as Ve,a2 as Ye,a3 as Xe,a4 as b,a5 as ze,a6 as Ge,a7 as We,a8 as Je,a9 as oe,aa as Qe,ab as ae,ac as Ze,ad as et,ae as tt}from"./vendor.2163813b.js";import{r as nt,s as rt}from"./vendor_msw.0143b515.js";const ot=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}};ot();const ie=l.exports.createContext({}),le=()=>l.exports.useContext(ie),at=({children:e})=>{const t=ye("(prefers-color-scheme: dark)"),[r,o]=xe("theme",t?"dark":"light",!0);return n(ie.Provider,{value:{theme:r,setTheme:o},children:e})},st=({children:e})=>n(Ce,{backend:ve,children:e});var w=(e=>(e.CARD="card",e))(w||{});const U=()=>K(),S=V,ct="https://api.spacexdata.com",it="/v4",de=ct+it;class lt{constructor(t={}){this.baseApiUrl=de,this.service=Le.create({baseURL:this.baseApiUrl,timeout:6e4,headers:{"Content-Type":"application/json"}}),t.baseUrl&&(this.baseApiUrl=t.baseUrl),this.service.interceptors.request.use(ut),this.service.interceptors.request.use(r=>dt(r),r=>{var o;return Promise.reject({error:r,message:(o=r==null?void 0:r.message)!=null?o:""})})}get(t,r){return this.service.get(`${this.baseApiUrl}/${t}`,r)}post(t,r,o={}){return this.service.post(`${this.baseApiUrl}/${t}`,r,o)}put(t,r){return this.service.put(`${this.baseApiUrl}/${t}`,r)}delete(t){return this.service.delete(`${this.baseApiUrl}/${t}`)}}const dt=async e=>e;function ut(e){return g({},e)}var X=(e=>(e.getPastList="launches/past",e.getUpcomingList="launches/upcoming",e.updateOne="launches/",e.getOne="launches/:id",e))(X||{});class ht extends lt{constructor(){super(),this.endpoints=X,this.getPastList=(t={})=>this.get(this.endpoints.getPastList,t),this.getUpcomingList=(t={})=>this.get(this.endpoints.getUpcomingList,t),this.updateOne=(t,r={})=>this.post(this.endpoints.updateOne,t,r),this.getOne=(t,r={})=>this.get(this.endpoints.getOne.replace(/:id/i,t),r)}}const $=new ht,y={past:"past",next:"next",my:"my"},N={find:De,findIndex:Ie,propEq:be,insert:Se,clone:Te},pt={notFoundImg:"https://avatars.mds.yandex.net/i?id=1f003da65852aa344a727ad65f5a23ef_l-5439293-images-thumbs&n=13"},z={formatDate:e=>""+new Date(e).toLocaleDateString("ru-RU")+" "+new Date(e).toLocaleTimeString("ru-RU")},mt={item:null,list:{past:[],next:[],my:[]},loading:{past:!1,next:!1,my:!1,item:!1}},ft=B("launches/fetchPastLaunchesList"),gt=B("launches/fetchPastLaunchesList"),yt=B("launches/fetchLaunchById"),xt=B("launches/onChangeLaunchType"),Ct=B("launches/onConfirmChangeLaunchType"),ue=se({name:"launches",initialState:mt,reducers:{setIsLoading(e,t){const{type:r,value:o}=t.payload;e.loading[r]=o},setListByType(e,t){const{type:r,value:o}=t.payload;e.list[r]=o},setLaunchItem(e,t){e.item=t.payload},updateLaunchIndex(e,t){const{dragIndex:r,hoverIndex:o,type:a}=t.payload,s=e.list[a][r];if(s){const c=N.clone(e.list[a]),[i]=c.splice(o,1,s);c.splice(r,1,i),e.list[a]=c}},updateLaunchType(e,t){const{data:r,newType:o}=t.payload;if(o===r.name)return;const a=N.clone(e.list[r.name]),s=N.findIndex(N.propEq("id",r.item.id))(a),[c]=a.splice(s,1);e.list[r.name]=a;const i=N.clone(e.list[o]);e.list[o]=N.insert(0,c,i)}}}),u=g({fetchPastLaunchesList:ft,fetchNextLaunchesList:gt,onChangeLaunchType:xt,onConfirmChangeLaunchType:Ct,fetchLaunchById:yt},ue.actions),vt=ue.reducer;function*Lt(){yield Y([])}const Dt=P(e=>e.ui.notifications,e=>e),It=P(e=>e.ui.openedModal,e=>e),he=se({name:"ui",initialState:{notifications:[],openedModal:null},reducers:{showModalById:(e,t)=>{e.openedModal=t.payload},closeCurrentModal:e=>{e.openedModal=null},pushNotification:(e,t)=>{e.notifications=[...e.notifications,g({},t.payload)]},removeNotification:(e,t)=>{e.notifications=e.notifications.filter(r=>r.id!==t.payload.id)}}}),{closeCurrentModal:bt,showModalById:St,removeNotification:Tt,pushNotification:_n}=he.actions,kt=he.reducer;var G=(e=>(e[e.ASK_SHOULD_MOVE_LAUNCH_FROM_MY=0]="ASK_SHOULD_MOVE_LAUNCH_FROM_MY",e))(G||{});function*At(){try{yield C(u.setIsLoading({value:!0,type:"past"}));const e=yield v($.getPastList);yield C(u.setListByType({value:e.data,type:"past"}))}catch(e){console.error(e,"error")}finally{yield C(u.setIsLoading({value:!1,type:"past"}))}}function*Mt(){try{yield C(u.setIsLoading({value:!0,type:"past"}));const e=yield v($.getUpcomingList);yield C(u.setListByType({value:e.data,type:"next"}))}catch(e){console.error(e,"error")}finally{yield C(u.setIsLoading({value:!1,type:"next"}))}}function*wt({payload:e}){try{yield C(u.setIsLoading({value:!0,type:"item"}));const t=yield v($.getOne,e);yield C(u.setLaunchItem(t.data))}catch(t){console.log(t,"error")}finally{yield C(u.setIsLoading({value:!1,type:"item"}))}}function*_t({payload:e}){const t=e.data.item.id,r=e.data.name,o=e.newType;try{if(r===y.my&&r!==o){yield C(St(G.ASK_SHOULD_MOVE_LAUNCH_FROM_MY));const{payload:{confirmed:a}}=yield ke(u.onConfirmChangeLaunchType);if(!a)return}r!==o&&(yield v($.updateOne,{newType:o,id:t})),yield C(u.updateLaunchType(e))}catch(a){console.error(a,"error")}}function*Ot(){yield F(u.fetchPastLaunchesList.type,At)}function*Nt(){yield F(u.fetchNextLaunchesList.type,Mt)}function*Rt(){yield F(u.onChangeLaunchType,_t)}function*Pt(){yield F(u.fetchLaunchById,wt)}function*Bt(){yield Y([v(Ot),v(Nt),v(Rt),v(Pt)])}const Ut=P(e=>e.launches.list.my,e=>e==null?void 0:e.map(t=>A(g({},t),{status:y.my}))),Et=e=>e.launches.loading.past,Ft=e=>e.launches.loading.next,$t=e=>e.launches.loading.my,Ht=P(e=>e.launches.list.past,e=>e==null?void 0:e.map(t=>A(g({},t),{status:y.past}))),jt=P(e=>e.launches.list.next,e=>e==null?void 0:e.map(t=>A(g({},t),{status:y.next}))),qt=P(e=>e.launches.item,e=>e),Kt=Ae({launches:vt,ui:kt});function*Vt(){return yield Y([v(Bt),v(Lt)])}const pe=Me(),Yt=we({reducer:Kt,middleware:e=>e().concat(pe)});pe.run(Vt);const Xt=({children:e})=>n(_e,{store:Yt,children:e}),zt=({children:e})=>{const{theme:t}=le(),r=l.exports.useMemo(()=>Wt(t),[t]);return p(Ne,{theme:r,children:[n(Re,{}),e]})},Gt="#749797",Wt=e=>{const t=e==="dark";return Oe({palette:{mode:e,background:{default:t?"#303030;":"#f0f0f0",paper:t?"#242526":"#ffffff"},primary:{main:Gt},error:{main:"rgb(193,55,55)"},success:{main:"rgb(76,175,80)"}}})};const Jt="ERROR",Qt="SUCCESS",Zt=({children:e,selector:t})=>{const r=l.exports.useRef(),[o,a]=l.exports.useState(!1);return l.exports.useEffect(()=>{r.current=document.querySelector(t),a(!0)},[t]),o?Pe.exports.createPortal(e,r.current):null},en=e=>{const{id:t,type:r,title:o,message:a}=e,s=K(),[c,i]=l.exports.useState(!1),[d,f]=l.exports.useState(0),[h,T]=l.exports.useState(null),m=()=>{const I=setInterval(()=>{f(k=>k<100?k+.5:(clearInterval(I),k))},20);T(I)},L=()=>{clearInterval(h)},D=()=>{L(),i(!0),setTimeout(()=>{s(Tt({id:t}))},400)};return l.exports.useEffect(()=>{d===100&&D()},[d]),l.exports.useEffect(()=>(m(),()=>{clearInterval(h)}),[]),p("div",{onMouseEnter:L,onMouseLeave:m,className:`notification-item text-white
      ${r===Qt&&"success"}
      ${r===Jt&&"error"}
      ${c?"exit":""}
      `,children:[o&&n("h4",{children:o}),n("p",{children:a})]})},tn=({children:e})=>{const t=V(Dt);return l.exports.useEffect(()=>{}),p(l.exports.Fragment,{children:[n(Zt,{selector:"#notifications",children:n("div",{className:"notification-wrapper",children:t==null?void 0:t.map(r=>n(en,g({},r),r.id))})}),e]})},nn=[nt.post(`${de}/${X.updateOne}`,(e,t,r)=>t(r.json({ok:!0})))],rn=[...nn],on=rt(...rn),an=()=>{const{theme:e,setTheme:t}=le();return p(dn,{children:[n(sn,{type:"checkbox",id:"dark-mode-toggle",checked:e==="dark",onChange:({target:{checked:r}})=>{t(r?"dark":"light")}}),p(ln,{htmlFor:"dark-mode-toggle",children:[n(hn,{children:n(Ue,{color:"inherit",fontSize:"small"})}),n(un,{children:n(Ee,{color:"inherit",fontSize:"small"})}),n(cn,{isChecked:e==="dark"})]})]})},sn=_("input")`
  opacity: 0;
  position: absolute;
`,cn=_("div",{shouldForwardProp:Be})`
  background-color: #fff;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  height: 16px;
  width: 16px;
  transform: translateX(0px);
  transition: transform 0.2s linear;
  ${({isChecked:e})=>e?"transform: translateX(17px);":""}
`,ln=_("label")`
  background-color: #111;
  border-radius: 50px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px;
  position: relative;
  height: 20px;
  width: 35px;
  transform: scale(1.5);
`,dn=_("div")`
  transition: background 0.2s linear;
`,un=_("i")`
  color: #f39c12;
  & svg {
    & path {
      color: #f39c12 !important;
    }
    font-size: 0.6em;
  }
`,hn=_("i")`
  color: #f1c40f;
  & svg {
    & path {
      color: #f1c40f !important;
    }
    font-size: 0.6em;
  }
`,pn=()=>n(Fe,{position:"sticky",children:n($e,{variant:"dense",children:n(an,{})})}),mn=()=>{var a,s;const e=U(),t=S(qt),r=S(c=>c.launches.loading.item),{launchId:o}=He();return l.exports.useEffect(()=>(e(u.fetchLaunchById(o)),()=>{e(u.setLaunchItem(null))}),[o]),r?p(x,{p:3,flexDirection:"column",display:"flex",children:[n(M,{mb:2,variant:"h3",children:"Loading.."}),n(R,{to:"/",component:q,children:"Go back"})]}):t?p(x,{p:3,flexDirection:"column",display:"flex",children:[n(M,{mb:2,variant:"h3",children:t.name}),n(x,{mb:4,width:200,height:200,display:"flex",alignItems:"center",justifyContent:"center",children:n("img",{style:{objectFit:"cover",width:"100%",height:"100%"},src:((s=(a=t.links)==null?void 0:a.patch)==null?void 0:s.small)||pt.notFoundImg,alt:"patch"})}),n(R,{to:"/",component:q,children:"Go back"}),n("pre",{children:n("code",{children:JSON.stringify(t,null,2)})})]}):p(x,{p:3,flexDirection:"column",display:"flex",children:[n(M,{mb:2,variant:"h3",children:"Nothing found"}),n(R,{to:"/",component:q,children:"Go back"})]})},H=e=>{const{loading:t=!1,content:r,header:o,subheader:a}=e;return p(je,{sx:{flex:"1 1 100%",mb:2,mt:2},children:[n(qe,{title:t?n(O,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}):o,subheader:t?n(O,{animation:"wave",height:10,width:"40%"}):a}),n(Ke,{children:t?p(l.exports.Fragment,{children:[n(O,{animation:"wave",height:10,style:{marginBottom:6}}),n(O,{animation:"wave",height:10,style:{marginBottom:6}}),n(O,{animation:"wave",height:10,style:{marginBottom:6}}),n(O,{animation:"wave",height:10,width:"80%"})]}):n(M,{variant:"body2",color:"text.secondary",component:"p",children:r})})]})},fn={cursor:"move"},gn=({item:e,name:t,children:r,onDrop:o,onDrag:a,type:s,index:c})=>{const i=l.exports.useRef(null),[,d]=ce({accept:s,hover(m,L){var ee;if(!i.current)return;const D=m.index,I=c;if(D===I)return;const k=(ee=i.current)==null?void 0:ee.getBoundingClientRect(),Q=(k.bottom-k.top)/2,Z=L.getClientOffset().y-k.top;D<I&&Z<Q||D>I&&Z>Q||m.name==t&&(o(D,I,t),m.index=I)}}),[{isDragging:f},h]=Ve({type:s,item:{item:e,type:s,name:t},end:(m,L)=>{const D=L.getDropResult();D&&a&&a(m,D)},collect:m=>({isDragging:m.isDragging()})}),T=f?.4:1;return h(d(i)),n("div",{ref:i,style:A(g({},fn),{opacity:T}),children:r})},yn=e=>{const{children:t,type:r,onDrop:o,className:a,style:s,canDrop:c}=e,[{canDrop:i,isOver:d},f]=ce({accept:r,drop:o,canDrop:c,collect:m=>({isOver:m.isOver(),canDrop:m.canDrop()})}),h=Ye(),T=()=>{if(d){if(i)return h.palette.action.active;if(!i)return h.palette.error.main}else return h.palette.background.default};return n(x,{borderRadius:2,sx:A(g({},s),{backgroundColor:T()}),ref:f,className:a,children:t})},W=e=>{const d=e,{type:t,name:r,index:o,id:a,onDrop:s,onDrag:c}=d,i=j(d,["type","name","index","id","onDrop","onDrag"]);return n(gn,{name:r,index:o,type:t,item:g({id:a},i),onDrop:s,onDrag:c,children:n(H,g({},i))})},J=({name:e,children:t,type:r,onDrop:o,canDrop:a})=>n(Xe,{direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,flex:"1 1 100%",style:{height:"100%"},children:n(yn,{type:r,onDrop:i=>{o({name:e,item:i})},canDrop:i=>{const{name:d}=i;return a(d)},style:{width:"100%",height:"100%",px:2},children:t})}),xn=({onCardMove:e,onColumnDrop:t,canDrop:r})=>{const o=S($t),a=S(Ut);return n(l.exports.Fragment,{children:n(b,{item:!0,xs:4,children:n(J,{canDrop:r,name:y.my,type:w.CARD,onDrop:t,children:o?Array.from(Array(4).keys()).map((s,c)=>n(x,{children:n(H,{loading:!0})},c)):a==null?void 0:a.map((s,c)=>n(R,{to:s.id,children:n(W,{index:c,name:y.my,type:w.CARD,onDrop:e,id:s.id,header:s.name,content:s.details,subheader:z.formatDate(s.date_local)})},s.id))})})})},Cn=({onCardMove:e,onColumnDrop:t,canDrop:r})=>{const o=U(),a=S(Ft),s=S(jt);return l.exports.useEffect(()=>{s.length||o(u.fetchPastLaunchesList())},[]),n(l.exports.Fragment,{children:n(b,{item:!0,xs:4,children:n(J,{canDrop:r,name:y.next,type:w.CARD,onDrop:t,children:a?Array.from(Array(4).keys()).map((c,i)=>n(x,{children:n(H,{loading:!0})},i)):s==null?void 0:s.map((c,i)=>n(R,{to:c.id,children:n(W,{index:i,name:y.next,type:w.CARD,onDrop:e,id:c.id,header:c.name,content:c.details,subheader:z.formatDate(c.date_local)})},c.id))})})})},vn=({onCardMove:e,onColumnDrop:t,canDrop:r})=>{const o=U(),a=S(Et),s=S(Ht);return l.exports.useEffect(()=>{s.length||o(u.fetchPastLaunchesList())},[]),n(l.exports.Fragment,{children:n(b,{item:!0,xs:4,children:n(J,{canDrop:r,name:y.past,type:w.CARD,onDrop:t,children:a?Array.from(Array(4).keys()).map((c,i)=>n(x,{children:n(H,{loading:!0})},i)):s==null?void 0:s.map((c,i)=>n(R,{to:c.id,children:n(W,{name:y.past,index:i,type:w.CARD,onDrop:e,id:c.id,header:c.name,content:c.details,subheader:z.formatDate(c.date_local)})},c.id))})})})},Ln=e=>{const L=e,{modalId:t,onAction:r,children:o,onClose:a,actionText:s="Ok",title:c}=L,i=j(L,["modalId","onAction","children","onClose","actionText","title"]),d=V(It),f=K(),h=()=>f(bt()),T=()=>{h(),a&&a()},m=()=>{r(),h()};return p(ze,A(g({sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435}},maxWidth:"xs",open:t===d},i),{children:[n(Ge,{children:c}),n(We,{children:o}),p(Je,{children:[n(oe,{onClick:T,children:"Cancel"}),n(oe,{onClick:m,children:s})]})]}))},Dn=()=>{const e=U(),t=l.exports.useCallback(()=>{e(u.onConfirmChangeLaunchType({confirmed:!0}))},[]),r=l.exports.useCallback(()=>{e(u.onConfirmChangeLaunchType({confirmed:!1}))},[]);return n(Ln,{title:"Do you want to cancel your reservation?",actionText:"Confirm",modalId:G.ASK_SHOULD_MOVE_LAUNCH_FROM_MY,onAction:t,onClose:r})},In=()=>{const e=U(),t=l.exports.useRef(0),r=l.exports.useCallback(({item:i,name:d})=>{e(u.onChangeLaunchType({newType:d,data:i}))},[]),o=l.exports.useCallback(i=>{const{past:d}=y;return i===d},[]),a=l.exports.useCallback(i=>{const{next:d,my:f}=y,h=i;return h===d||h===f},[]),s=l.exports.useCallback(i=>{const{next:d,my:f}=y,h=i;return h===d||h===f},[]),c=l.exports.useCallback((i,d,f)=>{t.current=d,e(u.updateLaunchIndex({dragIndex:i,hoverIndex:d,type:f}))},[]);return p(l.exports.Fragment,{children:[n(Dn,{}),p(b,{container:!0,spacing:2,children:[n(b,{item:!0,xs:4,alignItems:"center",children:n(x,{mt:5,px:2,alignItems:"center",children:n(M,{variant:"h4",children:"Past launches"})})}),n(b,{item:!0,xs:4,alignItems:"center",children:n(x,{mt:5,px:2,alignItems:"center",children:n(M,{variant:"h4",children:"Next launches"})})}),n(b,{item:!0,xs:4,alignItems:"center",children:n(x,{mt:5,px:2,alignItems:"center",children:n(M,{variant:"h4",children:" My launches"})})})]}),p(b,{container:!0,spacing:2,mt:2,children:[n(vn,{onCardMove:c,onColumnDrop:r,canDrop:o}),n(Cn,{onCardMove:c,onColumnDrop:r,canDrop:a}),n(xn,{onCardMove:c,onColumnDrop:r,canDrop:s})]})]})},bn=()=>p(Qe,{children:[n(ae,{exact:!0,path:"/",children:n(In,{})}),n(ae,{exact:!0,path:"/:launchId",children:n(mn,{})})]}),Sn=()=>p(Tn,{children:[n(pn,{}),n(bn,{})]}),Tn=_("div")`
  width: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  & a {
    text-decoration: none;
    & .MuiCardHeader-title {
      text-decoration: underline;
    }
  }
`;Ze();on.start();et.render(n(l.exports.StrictMode,{children:n(Xt,{children:n(st,{children:n(at,{children:n(zt,{children:n(tn,{children:n(tt,{children:n(Sn,{})})})})})})})}),document.getElementById("root"));
