var me=Object.defineProperty,fe=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var ee=(e,t,n)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))te.call(t,n)&&ee(e,n,t[n]);if(E)for(var n of E(t))ne.call(t,n)&&ee(e,n,t[n]);return e},A=(e,t)=>fe(e,ge(t));var j=(e,t)=>{var n={};for(var o in e)te.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&E)for(var o of E(e))t.indexOf(o)<0&&ne.call(e,o)&&(n[o]=e[o]);return n};import{r as l,u as ye,g as xe,j as r,D as Ce,H as ve,h as K,i as V,k as Le,m as De,n as Ie,p as be,o as Se,q as Te,t as ae,v as B,w as Y,x as N,y as v,z as $,A as C,B as ke,C as Ae,E as _e,F as Me,P as we,G as Oe,I as p,T as Pe,J as Re,K as Ne,L as w,M as Be,N as Ue,O as Ee,Q as $e,R as Fe,S as He,U as x,V as _,W as R,X as q,Y as je,Z as qe,_ as O,$ as Ke,a0 as ce,a1 as Ve,a2 as Ye,a3 as Xe,a4 as b,a5 as ze,a6 as Ge,a7 as We,a8 as Je,a9 as re,aa as Qe,ab as oe,ac as Ze,ad as et,ae as tt}from"./vendor.724c11e9.js";const nt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};nt();const rt="modulepreload",se={},ot="/ts-react-mui-saga-dnd-example/",st=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${ot}${o}`,o in se)return;se[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":rt,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((i,d)=>{c.addEventListener("load",i),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},ie=l.exports.createContext({}),le=()=>l.exports.useContext(ie),at=({children:e})=>{const t=ye("(prefers-color-scheme: dark)"),[n,o]=xe("theme",t?"dark":"light",!0);return r(ie.Provider,{value:{theme:n,setTheme:o},children:e})},ct=({children:e})=>r(Ce,{backend:ve,children:e});var M=(e=>(e.CARD="card",e))(M||{});const U=()=>K(),S=V,it="https://api.spacexdata.com",lt="/v4",dt=it+lt;class ut{constructor(t={}){this.baseApiUrl=dt,this.service=Le.create({baseURL:this.baseApiUrl,timeout:6e4,headers:{"Content-Type":"application/json"}}),t.baseUrl&&(this.baseApiUrl=t.baseUrl),this.service.interceptors.request.use(pt),this.service.interceptors.request.use(n=>ht(n),n=>{var o;return Promise.reject({error:n,message:(o=n==null?void 0:n.message)!=null?o:""})})}get(t,n){return this.service.get(`${this.baseApiUrl}/${t}`,n)}post(t,n,o={}){return this.service.post(`${this.baseApiUrl}/${t}`,n,o)}put(t,n){return this.service.put(`${this.baseApiUrl}/${t}`,n)}delete(t){return this.service.delete(`${this.baseApiUrl}/${t}`)}}const ht=async e=>e;function pt(e){return g({},e)}var de=(e=>(e.getPastList="launches/past",e.getUpcomingList="launches/upcoming",e.updateOne="launches/",e.getOne="launches/:id",e))(de||{});class mt extends ut{constructor(){super(),this.endpoints=de,this.getPastList=(t={})=>this.get(this.endpoints.getPastList,t),this.getUpcomingList=(t={})=>this.get(this.endpoints.getUpcomingList,t),this.updateOne=(t,n={})=>this.post(this.endpoints.updateOne,t,n),this.getOne=(t,n={})=>this.get(this.endpoints.getOne.replace(/:id/i,t),n)}}const F=new mt,y={past:"past",next:"next",my:"my"},P={find:De,findIndex:Ie,propEq:be,insert:Se,clone:Te},ft={notFoundImg:"https://avatars.mds.yandex.net/i?id=1f003da65852aa344a727ad65f5a23ef_l-5439293-images-thumbs&n=13"},X={formatDate:e=>""+new Date(e).toLocaleDateString("ru-RU")+" "+new Date(e).toLocaleTimeString("ru-RU")},gt={item:null,list:{past:[],next:[],my:[]},loading:{past:!1,next:!1,my:!1,item:!1}},yt=B("launches/fetchPastLaunchesList"),xt=B("launches/fetchPastLaunchesList"),Ct=B("launches/fetchLaunchById"),vt=B("launches/onChangeLaunchType"),Lt=B("launches/onConfirmChangeLaunchType"),ue=ae({name:"launches",initialState:gt,reducers:{setIsLoading(e,t){const{type:n,value:o}=t.payload;e.loading[n]=o},setListByType(e,t){const{type:n,value:o}=t.payload;e.list[n]=o},setLaunchItem(e,t){e.item=t.payload},updateLaunchIndex(e,t){const{dragIndex:n,hoverIndex:o,type:s}=t.payload,a=e.list[s][n];if(a){const c=P.clone(e.list[s]),[i]=c.splice(o,1,a);c.splice(n,1,i),e.list[s]=c}},updateLaunchType(e,t){const{data:n,newType:o}=t.payload;if(o===n.name)return;const s=P.clone(e.list[n.name]),a=P.findIndex(P.propEq("id",n.item.id))(s),[c]=s.splice(a,1);e.list[n.name]=s;const i=P.clone(e.list[o]);e.list[o]=P.insert(0,c,i)}}}),u=g({fetchPastLaunchesList:yt,fetchNextLaunchesList:xt,onChangeLaunchType:vt,onConfirmChangeLaunchType:Lt,fetchLaunchById:Ct},ue.actions),Dt=ue.reducer;function*It(){yield Y([])}const bt=N(e=>e.ui.notifications,e=>e),St=N(e=>e.ui.openedModal,e=>e),he=ae({name:"ui",initialState:{notifications:[],openedModal:null},reducers:{showModalById:(e,t)=>{e.openedModal=t.payload},closeCurrentModal:e=>{e.openedModal=null},pushNotification:(e,t)=>{e.notifications=[...e.notifications,g({},t.payload)]},removeNotification:(e,t)=>{e.notifications=e.notifications.filter(n=>n.id!==t.payload.id)}}}),{closeCurrentModal:Tt,showModalById:kt,removeNotification:At,pushNotification:_n}=he.actions,_t=he.reducer;var z=(e=>(e[e.ASK_SHOULD_MOVE_LAUNCH_FROM_MY=0]="ASK_SHOULD_MOVE_LAUNCH_FROM_MY",e))(z||{});function*Mt(){try{yield C(u.setIsLoading({value:!0,type:"past"}));const e=yield v(F.getPastList);yield C(u.setListByType({value:e.data,type:"past"}))}catch(e){console.error(e,"error")}finally{yield C(u.setIsLoading({value:!1,type:"past"}))}}function*wt(){try{yield C(u.setIsLoading({value:!0,type:"past"}));const e=yield v(F.getUpcomingList);yield C(u.setListByType({value:e.data,type:"next"}))}catch(e){console.error(e,"error")}finally{yield C(u.setIsLoading({value:!1,type:"next"}))}}function*Ot({payload:e}){try{yield C(u.setIsLoading({value:!0,type:"item"}));const t=yield v(F.getOne,e);yield C(u.setLaunchItem(t.data))}catch(t){console.log(t,"error")}finally{yield C(u.setIsLoading({value:!1,type:"item"}))}}function*Pt({payload:e}){const t=e.data.item.id,n=e.data.name,o=e.newType;try{if(n===y.my&&n!==o){yield C(kt(z.ASK_SHOULD_MOVE_LAUNCH_FROM_MY));const{payload:{confirmed:s}}=yield ke(u.onConfirmChangeLaunchType);if(!s)return}n!==o&&(yield v(F.updateOne,{newType:o,id:t})),yield C(u.updateLaunchType(e))}catch(s){console.error(s,"error")}}function*Rt(){yield $(u.fetchPastLaunchesList.type,Mt)}function*Nt(){yield $(u.fetchNextLaunchesList.type,wt)}function*Bt(){yield $(u.onChangeLaunchType,Pt)}function*Ut(){yield $(u.fetchLaunchById,Ot)}function*Et(){yield Y([v(Rt),v(Nt),v(Bt),v(Ut)])}const $t=N(e=>e.launches.list.my,e=>e==null?void 0:e.map(t=>A(g({},t),{status:y.my}))),Ft=e=>e.launches.loading.past,Ht=e=>e.launches.loading.next,jt=e=>e.launches.loading.my,qt=N(e=>e.launches.list.past,e=>e==null?void 0:e.map(t=>A(g({},t),{status:y.past}))),Kt=N(e=>e.launches.list.next,e=>e==null?void 0:e.map(t=>A(g({},t),{status:y.next}))),Vt=N(e=>e.launches.item,e=>e),Yt=Ae({launches:Dt,ui:_t});function*Xt(){return yield Y([v(Et),v(It)])}const pe=_e(),zt=Me({reducer:Yt,middleware:e=>e().concat(pe)});pe.run(Xt);const Gt=({children:e})=>r(we,{store:zt,children:e}),Wt=({children:e})=>{const{theme:t}=le(),n=l.exports.useMemo(()=>Qt(t),[t]);return p(Pe,{theme:n,children:[r(Re,{}),e]})},Jt="#749797",Qt=e=>{const t=e==="dark";return Oe({palette:{mode:e,background:{default:t?"#303030;":"#f0f0f0",paper:t?"#242526":"#ffffff"},primary:{main:Jt},error:{main:"rgb(193,55,55)"},success:{main:"rgb(76,175,80)"}}})};const Zt="ERROR",en="SUCCESS",tn=({children:e,selector:t})=>{const n=l.exports.useRef(),[o,s]=l.exports.useState(!1);return l.exports.useEffect(()=>{n.current=document.querySelector(t),s(!0)},[t]),o?Ne.exports.createPortal(e,n.current):null},nn=e=>{const{id:t,type:n,title:o,message:s}=e,a=K(),[c,i]=l.exports.useState(!1),[d,f]=l.exports.useState(0),[h,T]=l.exports.useState(null),m=()=>{const I=setInterval(()=>{f(k=>k<100?k+.5:(clearInterval(I),k))},20);T(I)},L=()=>{clearInterval(h)},D=()=>{L(),i(!0),setTimeout(()=>{a(At({id:t}))},400)};return l.exports.useEffect(()=>{d===100&&D()},[d]),l.exports.useEffect(()=>(m(),()=>{clearInterval(h)}),[]),p("div",{onMouseEnter:L,onMouseLeave:m,className:`notification-item text-white
      ${n===en&&"success"}
      ${n===Zt&&"error"}
      ${c?"exit":""}
      `,children:[o&&r("h4",{children:o}),r("p",{children:s})]})},rn=({children:e})=>{const t=V(bt);return l.exports.useEffect(()=>{}),p(l.exports.Fragment,{children:[r(tn,{selector:"#notifications",children:r("div",{className:"notification-wrapper",children:t==null?void 0:t.map(n=>r(nn,g({},n),n.id))})}),e]})},on=()=>{const{theme:e,setTheme:t}=le();return p(ln,{children:[r(sn,{type:"checkbox",id:"dark-mode-toggle",checked:e==="dark",onChange:({target:{checked:n}})=>{t(n?"dark":"light")}}),p(cn,{htmlFor:"dark-mode-toggle",children:[r(un,{children:r(Ue,{color:"inherit",fontSize:"small"})}),r(dn,{children:r(Ee,{color:"inherit",fontSize:"small"})}),r(an,{isChecked:e==="dark"})]})]})},sn=w("input")`
  opacity: 0;
  position: absolute;
`,an=w("div",{shouldForwardProp:Be})`
  background-color: #fff;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  height: 16px;
  width: 16px;
  transform: translateX(0px);
  transition: transform 0.2s linear;
  ${({isChecked:e})=>e?"transform: translateX(17px);":""}
`,cn=w("label")`
  background-color: #111;
  border-radius: 50px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px;
  position: relative;
  height: 20px;
  width: 35px;
  transform: scale(1.5);
`,ln=w("div")`
  transition: background 0.2s linear;
`,dn=w("i")`
  color: #f39c12;
  & svg {
    & path {
      color: #f39c12 !important;
    }
    font-size: 0.6em;
  }
`,un=w("i")`
  color: #f1c40f;
  & svg {
    & path {
      color: #f1c40f !important;
    }
    font-size: 0.6em;
  }
`,hn=()=>r($e,{position:"sticky",children:r(Fe,{variant:"dense",children:r(on,{})})}),pn=()=>{var s,a;const e=U(),t=S(Vt),n=S(c=>c.launches.loading.item),{launchId:o}=He();return l.exports.useEffect(()=>(e(u.fetchLaunchById(o)),()=>{e(u.setLaunchItem(null))}),[o]),n?p(x,{p:3,flexDirection:"column",display:"flex",children:[r(_,{mb:2,variant:"h3",children:"Loading.."}),r(R,{to:"/",component:q,children:"Go back"})]}):t?p(x,{p:3,flexDirection:"column",display:"flex",children:[r(_,{mb:2,variant:"h3",children:t.name}),r(x,{mb:4,width:200,height:200,display:"flex",alignItems:"center",justifyContent:"center",children:r("img",{style:{objectFit:"cover",width:"100%",height:"100%"},src:((a=(s=t.links)==null?void 0:s.patch)==null?void 0:a.small)||ft.notFoundImg,alt:"patch"})}),r(R,{to:"/",component:q,children:"Go back"}),r("pre",{children:r("code",{children:JSON.stringify(t,null,2)})})]}):p(x,{p:3,flexDirection:"column",display:"flex",children:[r(_,{mb:2,variant:"h3",children:"Nothing found"}),r(R,{to:"/",component:q,children:"Go back"})]})},H=e=>{const{loading:t=!1,content:n,header:o,subheader:s}=e;return p(je,{sx:{flex:"1 1 100%",mb:2,mt:2},children:[r(qe,{title:t?r(O,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}):o,subheader:t?r(O,{animation:"wave",height:10,width:"40%"}):s}),r(Ke,{children:t?p(l.exports.Fragment,{children:[r(O,{animation:"wave",height:10,style:{marginBottom:6}}),r(O,{animation:"wave",height:10,style:{marginBottom:6}}),r(O,{animation:"wave",height:10,style:{marginBottom:6}}),r(O,{animation:"wave",height:10,width:"80%"})]}):r(_,{variant:"body2",color:"text.secondary",component:"p",children:n})})]})},mn={cursor:"move"},fn=({item:e,name:t,children:n,onDrop:o,onDrag:s,type:a,index:c})=>{const i=l.exports.useRef(null),[,d]=ce({accept:a,hover(m,L){var Z;if(!i.current)return;const D=m.index,I=c;if(D===I)return;const k=(Z=i.current)==null?void 0:Z.getBoundingClientRect(),J=(k.bottom-k.top)/2,Q=L.getClientOffset().y-k.top;D<I&&Q<J||D>I&&Q>J||m.name==t&&(o(D,I,t),m.index=I)}}),[{isDragging:f},h]=Ve({type:a,item:{item:e,type:a,name:t},end:(m,L)=>{const D=L.getDropResult();D&&s&&s(m,D)},collect:m=>({isDragging:m.isDragging()})}),T=f?.4:1;return h(d(i)),r("div",{ref:i,style:A(g({},mn),{opacity:T}),children:n})},gn=e=>{const{children:t,type:n,onDrop:o,className:s,style:a,canDrop:c}=e,[{canDrop:i,isOver:d},f]=ce({accept:n,drop:o,canDrop:c,collect:m=>({isOver:m.isOver(),canDrop:m.canDrop()})}),h=Ye(),T=()=>{if(d){if(i)return h.palette.action.active;if(!i)return h.palette.error.main}else return h.palette.background.default};return r(x,{borderRadius:2,sx:A(g({},a),{backgroundColor:T()}),ref:f,className:s,children:t})},G=e=>{const d=e,{type:t,name:n,index:o,id:s,onDrop:a,onDrag:c}=d,i=j(d,["type","name","index","id","onDrop","onDrag"]);return r(fn,{name:n,index:o,type:t,item:g({id:s},i),onDrop:a,onDrag:c,children:r(H,g({},i))})},W=({name:e,children:t,type:n,onDrop:o,canDrop:s})=>r(Xe,{direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,flex:"1 1 100%",style:{height:"100%"},children:r(gn,{type:n,onDrop:i=>{o({name:e,item:i})},canDrop:i=>{const{name:d}=i;return s(d)},style:{width:"100%",height:"100%",px:2},children:t})}),yn=({onCardMove:e,onColumnDrop:t,canDrop:n})=>{const o=S(jt),s=S($t);return r(l.exports.Fragment,{children:r(b,{item:!0,xs:4,children:r(W,{canDrop:n,name:y.my,type:M.CARD,onDrop:t,children:o?Array.from(Array(4).keys()).map((a,c)=>r(x,{children:r(H,{loading:!0})},c)):s==null?void 0:s.map((a,c)=>r(R,{to:a.id,children:r(G,{index:c,name:y.my,type:M.CARD,onDrop:e,id:a.id,header:a.name,content:a.details,subheader:X.formatDate(a.date_local)})},a.id))})})})},xn=({onCardMove:e,onColumnDrop:t,canDrop:n})=>{const o=U(),s=S(Ht),a=S(Kt);return l.exports.useEffect(()=>{a.length||o(u.fetchPastLaunchesList())},[]),r(l.exports.Fragment,{children:r(b,{item:!0,xs:4,children:r(W,{canDrop:n,name:y.next,type:M.CARD,onDrop:t,children:s?Array.from(Array(4).keys()).map((c,i)=>r(x,{children:r(H,{loading:!0})},i)):a==null?void 0:a.map((c,i)=>r(R,{to:c.id,children:r(G,{index:i,name:y.next,type:M.CARD,onDrop:e,id:c.id,header:c.name,content:c.details,subheader:X.formatDate(c.date_local)})},c.id))})})})},Cn=({onCardMove:e,onColumnDrop:t,canDrop:n})=>{const o=U(),s=S(Ft),a=S(qt);return l.exports.useEffect(()=>{a.length||o(u.fetchPastLaunchesList())},[]),r(l.exports.Fragment,{children:r(b,{item:!0,xs:4,children:r(W,{canDrop:n,name:y.past,type:M.CARD,onDrop:t,children:s?Array.from(Array(4).keys()).map((c,i)=>r(x,{children:r(H,{loading:!0})},i)):a==null?void 0:a.map((c,i)=>r(R,{to:c.id,children:r(G,{name:y.past,index:i,type:M.CARD,onDrop:e,id:c.id,header:c.name,content:c.details,subheader:X.formatDate(c.date_local)})},c.id))})})})},vn=e=>{const L=e,{modalId:t,onAction:n,children:o,onClose:s,actionText:a="Ok",title:c}=L,i=j(L,["modalId","onAction","children","onClose","actionText","title"]),d=V(St),f=K(),h=()=>f(Tt()),T=()=>{h(),s&&s()},m=()=>{n(),h()};return p(ze,A(g({sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435}},maxWidth:"xs",open:t===d},i),{children:[r(Ge,{children:c}),r(We,{children:o}),p(Je,{children:[r(re,{onClick:T,children:"Cancel"}),r(re,{onClick:m,children:a})]})]}))},Ln=()=>{const e=U(),t=l.exports.useCallback(()=>{e(u.onConfirmChangeLaunchType({confirmed:!0}))},[]),n=l.exports.useCallback(()=>{e(u.onConfirmChangeLaunchType({confirmed:!1}))},[]);return r(vn,{title:"Do you want to cancel your reservation?",actionText:"Confirm",modalId:z.ASK_SHOULD_MOVE_LAUNCH_FROM_MY,onAction:t,onClose:n})},Dn=()=>{const e=U(),t=l.exports.useRef(0),n=l.exports.useCallback(({item:i,name:d})=>{e(u.onChangeLaunchType({newType:d,data:i}))},[]),o=l.exports.useCallback(i=>{const{past:d}=y;return i===d},[]),s=l.exports.useCallback(i=>{const{next:d,my:f}=y,h=i;return h===d||h===f},[]),a=l.exports.useCallback(i=>{const{next:d,my:f}=y,h=i;return h===d||h===f},[]),c=l.exports.useCallback((i,d,f)=>{t.current=d,e(u.updateLaunchIndex({dragIndex:i,hoverIndex:d,type:f}))},[]);return p(l.exports.Fragment,{children:[r(Ln,{}),p(b,{container:!0,spacing:2,children:[r(b,{item:!0,xs:4,alignItems:"center",children:r(x,{mt:5,px:2,alignItems:"center",children:r(_,{variant:"h4",children:"Past launches"})})}),r(b,{item:!0,xs:4,alignItems:"center",children:r(x,{mt:5,px:2,alignItems:"center",children:r(_,{variant:"h4",children:"Next launches"})})}),r(b,{item:!0,xs:4,alignItems:"center",children:r(x,{mt:5,px:2,alignItems:"center",children:r(_,{variant:"h4",children:" My launches"})})})]}),p(b,{container:!0,spacing:2,mt:2,children:[r(Cn,{onCardMove:c,onColumnDrop:n,canDrop:o}),r(xn,{onCardMove:c,onColumnDrop:n,canDrop:s}),r(yn,{onCardMove:c,onColumnDrop:n,canDrop:a})]})]})},In=()=>p(Qe,{children:[r(oe,{exact:!0,path:"/",children:r(Dn,{})}),r(oe,{exact:!0,path:"/:launchId",children:r(pn,{})})]}),bn=()=>p(Sn,{children:[r(hn,{}),r(In,{})]}),Sn=w("div")`
  width: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  & a {
    text-decoration: none;
    & .MuiCardHeader-title {
      text-decoration: underline;
    }
  }
`;Ze();st(()=>import("./browser.ef819e20.js"),["assets/browser.ef819e20.js","assets/vendor_msw.7564631f.js","assets/vendor.724c11e9.js"]).then(({worker:e})=>e.start({onUnhandledRequest:"bypass",serviceWorker:{url:"/ts-react-mui-saga-dnd-example/mockServiceWorker.js"}})).then(()=>{et.render(r(l.exports.StrictMode,{children:r(Gt,{children:r(ct,{children:r(at,{children:r(Wt,{children:r(rn,{children:r(tt,{children:r(bn,{})})})})})})})}),document.getElementById("root"))}).catch(e=>{console.log(e)});export{de as L,dt as S};
