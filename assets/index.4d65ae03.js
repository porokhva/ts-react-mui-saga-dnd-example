var me=Object.defineProperty,fe=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var ne=(e,t,o)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))oe.call(t,o)&&ne(e,o,t[o]);if(E)for(var o of E(t))ae.call(t,o)&&ne(e,o,t[o]);return e},k=(e,t)=>fe(e,ge(t));var q=(e,t)=>{var o={};for(var a in e)oe.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&E)for(var a of E(e))t.indexOf(a)<0&&ae.call(e,a)&&(o[a]=e[a]);return o};import{r as l,ag as ye,A as n,ah as xe,ai as Ce,aj as V,ak as Y,al as ve,am as Le,an as De,ao as Ie,ap as be,aq as Se,ar as ce,as as B,at as z,au as P,av as v,aw as F,ax as C,ay as Te,az as Ae,aA as ke,aB as Me,aC as we,B as p,aD as Oe,aE as _e,j as Ne,aF as Re,aG as R,aH as ie,aI as Pe,aJ as Be,aK as re,aL as Ue,aM as Ee,aN as Fe}from"./vendor.f7c37dec.js";import{u as $e,c as He,C as je,s as O,d as qe,a as Ke,A as Ve,b as Ye,B as x,f as M,L as K,g as ze,h as Ge,S as _,i as Xe,j as Je,k as We,l as b,D as Qe,m as Ze,n as et,o as tt,p as se}from"./vendor_mui.1f649972.js";import{r as nt,s as ot}from"./vendor_msw.958fb05f.js";const at=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}};at();const le=l.exports.createContext({}),de=()=>l.exports.useContext(le),rt=({children:e})=>{const t=$e("(prefers-color-scheme: dark)"),[o,a]=ye("theme",t?"dark":"light",!0);return n(le.Provider,{value:{theme:o,setTheme:a},children:e})},st=({children:e})=>n(xe,{backend:Ce,children:e});var w=(e=>(e.CARD="card",e))(w||{});const U=()=>V(),S=Y,ct="https://api.spacexdata.com",it="/v4",G=ct+it;class lt{constructor(t={}){this.baseApiUrl=G,this.service=ve.create({baseURL:this.baseApiUrl,timeout:6e4,headers:{"Content-Type":"application/json"}}),t.baseUrl&&(this.baseApiUrl=t.baseUrl),this.service.interceptors.request.use(ut),this.service.interceptors.request.use(o=>dt(o),o=>{var a;return Promise.reject({error:o,message:(a=o==null?void 0:o.message)!=null?a:""})})}get(t,o){return this.service.get(`${this.baseApiUrl}/${t}`,o)}post(t,o,a={}){return this.service.post(`${this.baseApiUrl}/${t}`,o,a)}put(t,o){return this.service.put(`${this.baseApiUrl}/${t}`,o)}delete(t){return this.service.delete(`${this.baseApiUrl}/${t}`)}}const dt=async e=>e;function ut(e){return g({},e)}var $=(e=>(e.getPastList="launches/past",e.getUpcomingList="launches/upcoming",e.updateOne="launches/",e.getOne="launches/:id",e))($||{});class ht extends lt{constructor(){super(),this.endpoints=$,this.getPastList=(t={})=>this.get(this.endpoints.getPastList,t),this.getUpcomingList=(t={})=>this.get(this.endpoints.getUpcomingList,t),this.updateOne=(t,o={})=>this.post(this.endpoints.updateOne,t,o),this.getOne=(t,o={})=>this.get(this.endpoints.getOne.replace(/:id/i,t),o)}}const H=new ht,y={past:"past",next:"next",my:"my"},N={find:Le,findIndex:De,propEq:Ie,insert:be,clone:Se},pt={notFoundImg:"https://avatars.mds.yandex.net/i?id=1f003da65852aa344a727ad65f5a23ef_l-5439293-images-thumbs&n=13"},X={formatDate:e=>""+new Date(e).toLocaleDateString("ru-RU")+" "+new Date(e).toLocaleTimeString("ru-RU")},mt={item:null,list:{past:[],next:[],my:[]},loading:{past:!1,next:!1,my:!1,item:!1}},ft=B("launches/fetchPastLaunchesList"),gt=B("launches/fetchPastLaunchesList"),yt=B("launches/fetchLaunchById"),xt=B("launches/onChangeLaunchType"),Ct=B("launches/onConfirmChangeLaunchType"),ue=ce({name:"launches",initialState:mt,reducers:{setIsLoading(e,t){const{type:o,value:a}=t.payload;e.loading[o]=a},setListByType(e,t){const{type:o,value:a}=t.payload;e.list[o]=a},setLaunchItem(e,t){e.item=t.payload},updateLaunchIndex(e,t){const{dragIndex:o,hoverIndex:a,type:r}=t.payload,s=e.list[r][o];if(s){const c=N.clone(e.list[r]),[i]=c.splice(a,1,s);c.splice(o,1,i),e.list[r]=c}},updateLaunchType(e,t){const{data:o,newType:a}=t.payload;if(a===o.name)return;const r=N.clone(e.list[o.name]),s=N.findIndex(N.propEq("id",o.item.id))(r),[c]=r.splice(s,1);e.list[o.name]=r;const i=N.clone(e.list[a]);e.list[a]=N.insert(0,c,i)}}}),u=g({fetchPastLaunchesList:ft,fetchNextLaunchesList:gt,onChangeLaunchType:xt,onConfirmChangeLaunchType:Ct,fetchLaunchById:yt},ue.actions),vt=ue.reducer;function*Lt(){yield z([])}const Dt=P(e=>e.ui.notifications,e=>e),It=P(e=>e.ui.openedModal,e=>e),he=ce({name:"ui",initialState:{notifications:[],openedModal:null},reducers:{showModalById:(e,t)=>{e.openedModal=t.payload},closeCurrentModal:e=>{e.openedModal=null},pushNotification:(e,t)=>{e.notifications=[...e.notifications,g({},t.payload)]},removeNotification:(e,t)=>{e.notifications=e.notifications.filter(o=>o.id!==t.payload.id)}}}),{closeCurrentModal:bt,showModalById:St,removeNotification:Tt,pushNotification:On}=he.actions,At=he.reducer;var J=(e=>(e[e.ASK_SHOULD_MOVE_LAUNCH_FROM_MY=0]="ASK_SHOULD_MOVE_LAUNCH_FROM_MY",e))(J||{});function*kt(){try{yield C(u.setIsLoading({value:!0,type:"past"}));const e=yield v(H.getPastList);yield C(u.setListByType({value:e.data,type:"past"}))}catch(e){console.log(e,"error")}finally{yield C(u.setIsLoading({value:!1,type:"past"}))}}function*Mt(){try{yield C(u.setIsLoading({value:!0,type:"past"}));const e=yield v(H.getUpcomingList);yield C(u.setListByType({value:e.data,type:"next"}))}catch(e){console.log(e,"error")}finally{yield C(u.setIsLoading({value:!1,type:"next"}))}}function*wt({payload:e}){try{yield C(u.setIsLoading({value:!0,type:"item"}));const t=yield v(H.getOne,e);yield C(u.setLaunchItem(t.data))}catch(t){console.log(t,"error")}finally{yield C(u.setIsLoading({value:!1,type:"item"}))}}function*Ot({payload:e}){const t=e.data.item.id,o=e.data.name,a=e.newType;try{if(o===y.my&&o!==a){yield C(St(J.ASK_SHOULD_MOVE_LAUNCH_FROM_MY));const{payload:{confirmed:r}}=yield Te(u.onConfirmChangeLaunchType);if(!r)return}o!==a&&(yield v(H.updateOne,{newType:a,id:t})),yield C(u.updateLaunchType(e))}catch(r){console.log(r,"error")}}function*_t(){yield F(u.fetchPastLaunchesList.type,kt)}function*Nt(){yield F(u.fetchNextLaunchesList.type,Mt)}function*Rt(){yield F(u.onChangeLaunchType,Ot)}function*Pt(){yield F(u.fetchLaunchById,wt)}function*Bt(){yield z([v(_t),v(Nt),v(Rt),v(Pt)])}const Ut=P(e=>e.launches.list.my,e=>e==null?void 0:e.map(t=>k(g({},t),{status:y.my}))),Et=e=>e.launches.loading.past,Ft=e=>e.launches.loading.next,$t=e=>e.launches.loading.my,Ht=P(e=>e.launches.list.past,e=>e==null?void 0:e.map(t=>k(g({},t),{status:y.past}))),jt=P(e=>e.launches.list.next,e=>e==null?void 0:e.map(t=>k(g({},t),{status:y.next}))),qt=P(e=>e.launches.item,e=>e),Kt=Ae({launches:vt,ui:At});function*Vt(){return yield z([v(Bt),v(Lt)])}const pe=ke(),Yt=Me({reducer:Kt,middleware:e=>e().concat(pe)});pe.run(Vt);const zt=({children:e})=>n(we,{store:Yt,children:e}),Gt=({children:e})=>{const{theme:t}=de(),o=l.exports.useMemo(()=>Jt(t),[t]);return p(Oe,{theme:o,children:[n(je,{}),e]})},Xt="#749797",Jt=e=>{const t=e==="dark";return He({palette:{mode:e,background:{default:t?"#303030;":"#f0f0f0",paper:t?"#242526":"#ffffff"},primary:{main:Xt},error:{main:"rgb(193,55,55)"},success:{main:"rgb(76,175,80)"}}})};const Wt="ERROR",Qt="SUCCESS",Zt=({children:e,selector:t})=>{const o=l.exports.useRef(),[a,r]=l.exports.useState(!1);return l.exports.useEffect(()=>{o.current=document.querySelector(t),r(!0)},[t]),a?_e.exports.createPortal(e,o.current):null},en=e=>{const{id:t,type:o,title:a,message:r}=e,s=V(),[c,i]=l.exports.useState(!1),[d,f]=l.exports.useState(0),[h,T]=l.exports.useState(null),m=()=>{const I=setInterval(()=>{f(A=>A<100?A+.5:(clearInterval(I),A))},20);T(I)},L=()=>{clearInterval(h)},D=()=>{L(),i(!0),setTimeout(()=>{s(Tt({id:t}))},400)};return l.exports.useEffect(()=>{d===100&&D()},[d]),l.exports.useEffect(()=>(m(),()=>{clearInterval(h)}),[]),p("div",{onMouseEnter:L,onMouseLeave:m,className:`notification-item text-white
      ${o===Qt&&"success"}
      ${o===Wt&&"error"}
      ${c?"exit":""}
      `,children:[a&&n("h4",{children:a}),n("p",{children:r})]})},tn=({children:e})=>{const t=Y(Dt);return l.exports.useEffect(()=>{}),p(l.exports.Fragment,{children:[n(Zt,{selector:"#notifications",children:n("div",{className:"notification-wrapper",children:t==null?void 0:t.map(o=>n(en,g({},o),o.id))})}),e]})};console.log(`${G}/${$.updateOne}`);const nn=[nt.post(`${G}/${$.updateOne}`,(e,t,o)=>t(o.json({ok:!0})))],on=[...nn];ot(...on);const an=()=>{const{theme:e,setTheme:t}=de();return p(ln,{children:[n(rn,{type:"checkbox",id:"dark-mode-toggle",checked:e==="dark",onChange:({target:{checked:o}})=>{t(o?"dark":"light")}}),p(cn,{htmlFor:"dark-mode-toggle",children:[n(un,{children:n(qe,{color:"inherit",fontSize:"small"})}),n(dn,{children:n(Ke,{color:"inherit",fontSize:"small"})}),n(sn,{isChecked:e==="dark"})]})]})},rn=O("input")`
  opacity: 0;
  position: absolute;
`,sn=O("div",{shouldForwardProp:Ne})`
  background-color: #fff;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  height: 16px;
  width: 16px;
  transform: translateX(0px);
  transition: transform 0.2s linear;
  ${({isChecked:e})=>e?"transform: translateX(17px);":""}
`,cn=O("label")`
  background-color: #111;
  border-radius: 50px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px;
  position: relative;
  height: 20px;
  width: 35px;
  transform: scale(1.5);
`,ln=O("div")`
  transition: background 0.2s linear;
`,dn=O("i")`
  color: #f39c12;
  & svg {
    & path {
      color: #f39c12 !important;
    }
    font-size: 0.6em;
  }
`,un=O("i")`
  color: #f1c40f;
  & svg {
    & path {
      color: #f1c40f !important;
    }
    font-size: 0.6em;
  }
`,hn=()=>n(Ve,{position:"sticky",children:n(Ye,{variant:"dense",children:n(an,{})})}),pn=()=>{var r,s;const e=U(),t=S(qt),o=S(c=>c.launches.loading.item),{launchId:a}=Re();return l.exports.useEffect(()=>(e(u.fetchLaunchById(a)),()=>{e(u.setLaunchItem(null))}),[a]),o?p(x,{p:3,flexDirection:"column",display:"flex",children:[n(M,{mb:2,variant:"h3",children:"Loading.."}),n(R,{to:"/",component:K,children:"Go back"})]}):t?p(x,{p:3,flexDirection:"column",display:"flex",children:[n(M,{mb:2,variant:"h3",children:t.name}),n(x,{mb:4,width:200,height:200,display:"flex",alignItems:"center",justifyContent:"center",children:n("img",{style:{objectFit:"cover",width:"100%",height:"100%"},src:((s=(r=t.links)==null?void 0:r.patch)==null?void 0:s.small)||pt.notFoundImg,alt:"patch"})}),n(R,{to:"/",component:K,children:"Go back"}),n("pre",{children:n("code",{children:JSON.stringify(t,null,2)})})]}):p(x,{p:3,flexDirection:"column",display:"flex",children:[n(M,{mb:2,variant:"h3",children:"Nothing found"}),n(R,{to:"/",component:K,children:"Go back"})]})},j=e=>{const{loading:t=!1,content:o,header:a,subheader:r}=e;return p(ze,{sx:{flex:"1 1 100%",mb:2,mt:2},children:[n(Ge,{title:t?n(_,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}):a,subheader:t?n(_,{animation:"wave",height:10,width:"40%"}):r}),n(Xe,{children:t?p(l.exports.Fragment,{children:[n(_,{animation:"wave",height:10,style:{marginBottom:6}}),n(_,{animation:"wave",height:10,style:{marginBottom:6}}),n(_,{animation:"wave",height:10,style:{marginBottom:6}}),n(_,{animation:"wave",height:10,width:"80%"})]}):n(M,{variant:"body2",color:"text.secondary",component:"p",children:o})})]})},mn={cursor:"move"},fn=({item:e,name:t,children:o,onDrop:a,onDrag:r,type:s,index:c})=>{const i=l.exports.useRef(null),[,d]=ie({accept:s,hover(m,L){var te;if(!i.current)return;const D=m.index,I=c;if(D===I)return;const A=(te=i.current)==null?void 0:te.getBoundingClientRect(),Z=(A.bottom-A.top)/2,ee=L.getClientOffset().y-A.top;D<I&&ee<Z||D>I&&ee>Z||m.name==t&&(a(D,I,t),m.index=I)}}),[{isDragging:f},h]=Pe({type:s,item:{item:e,type:s,name:t},end:(m,L)=>{const D=L.getDropResult();D&&r&&r(m,D)},collect:m=>({isDragging:m.isDragging()})}),T=f?.4:1;return h(d(i)),n("div",{ref:i,style:k(g({},mn),{opacity:T}),children:o})},gn=e=>{const{children:t,type:o,onDrop:a,className:r,style:s,canDrop:c}=e,[{canDrop:i,isOver:d},f]=ie({accept:o,drop:a,canDrop:c,collect:m=>({isOver:m.isOver(),canDrop:m.canDrop()})}),h=Je(),T=()=>{if(d){if(i)return h.palette.action.active;if(!i)return h.palette.error.main}else return h.palette.background.default};return n(x,{borderRadius:2,sx:k(g({},s),{backgroundColor:T()}),ref:f,className:r,children:t})},W=e=>{const d=e,{type:t,name:o,index:a,id:r,onDrop:s,onDrag:c}=d,i=q(d,["type","name","index","id","onDrop","onDrag"]);return n(fn,{name:o,index:a,type:t,item:g({id:r},i),onDrop:s,onDrag:c,children:n(j,g({},i))})},Q=({name:e,children:t,type:o,onDrop:a,canDrop:r})=>n(We,{direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,flex:"1 1 100%",style:{height:"100%"},children:n(gn,{type:o,onDrop:i=>{a({name:e,item:i})},canDrop:i=>{const{name:d}=i;return r(d)},style:{width:"100%",height:"100%",px:2},children:t})}),yn=({onCardMove:e,onColumnDrop:t,canDrop:o})=>{const a=S($t),r=S(Ut);return n(l.exports.Fragment,{children:n(b,{item:!0,xs:4,children:n(Q,{canDrop:o,name:y.my,type:w.CARD,onDrop:t,children:a?Array.from(Array(4).keys()).map((s,c)=>n(x,{children:n(j,{loading:!0})},c)):r==null?void 0:r.map((s,c)=>n(R,{to:s.id,children:n(W,{index:c,name:y.my,type:w.CARD,onDrop:e,id:s.id,header:s.name,content:s.details,subheader:X.formatDate(s.date_local)})},s.id))})})})},xn=({onCardMove:e,onColumnDrop:t,canDrop:o})=>{const a=U(),r=S(Ft),s=S(jt);return l.exports.useEffect(()=>{s.length||a(u.fetchPastLaunchesList())},[]),n(l.exports.Fragment,{children:n(b,{item:!0,xs:4,children:n(Q,{canDrop:o,name:y.next,type:w.CARD,onDrop:t,children:r?Array.from(Array(4).keys()).map((c,i)=>n(x,{children:n(j,{loading:!0})},i)):s==null?void 0:s.map((c,i)=>n(R,{to:c.id,children:n(W,{index:i,name:y.next,type:w.CARD,onDrop:e,id:c.id,header:c.name,content:c.details,subheader:X.formatDate(c.date_local)})},c.id))})})})},Cn=({onCardMove:e,onColumnDrop:t,canDrop:o})=>{const a=U(),r=S(Et),s=S(Ht);return l.exports.useEffect(()=>{s.length||a(u.fetchPastLaunchesList())},[]),n(l.exports.Fragment,{children:n(b,{item:!0,xs:4,children:n(Q,{canDrop:o,name:y.past,type:w.CARD,onDrop:t,children:r?Array.from(Array(4).keys()).map((c,i)=>n(x,{children:n(j,{loading:!0})},i)):s==null?void 0:s.map((c,i)=>n(R,{to:c.id,children:n(W,{name:y.past,index:i,type:w.CARD,onDrop:e,id:c.id,header:c.name,content:c.details,subheader:X.formatDate(c.date_local)})},c.id))})})})},vn=e=>{const L=e,{modalId:t,onAction:o,children:a,onClose:r,actionText:s="Ok",title:c}=L,i=q(L,["modalId","onAction","children","onClose","actionText","title"]),d=Y(It),f=V(),h=()=>f(bt()),T=()=>{h(),r&&r()},m=()=>{o(),h()};return p(Qe,k(g({sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435}},maxWidth:"xs",open:t===d},i),{children:[n(Ze,{children:c}),n(et,{children:a}),p(tt,{children:[n(se,{onClick:T,children:"Cancel"}),n(se,{onClick:m,children:s})]})]}))},Ln=()=>{const e=U(),t=l.exports.useCallback(()=>{e(u.onConfirmChangeLaunchType({confirmed:!0}))},[]),o=l.exports.useCallback(()=>{e(u.onConfirmChangeLaunchType({confirmed:!1}))},[]);return n(vn,{title:"Do you want to cancel your reservation?",actionText:"Confirm",modalId:J.ASK_SHOULD_MOVE_LAUNCH_FROM_MY,onAction:t,onClose:o})},Dn=()=>{const e=U(),t=l.exports.useRef(0),o=l.exports.useCallback(({item:i,name:d})=>{e(u.onChangeLaunchType({newType:d,data:i}))},[]),a=l.exports.useCallback(i=>{const{past:d}=y;return i===d},[]),r=l.exports.useCallback(i=>{const{next:d,my:f}=y,h=i;return h===d||h===f},[]),s=l.exports.useCallback(i=>{const{next:d,my:f}=y,h=i;return h===d||h===f},[]),c=l.exports.useCallback((i,d,f)=>{t.current=d,e(u.updateLaunchIndex({dragIndex:i,hoverIndex:d,type:f}))},[]);return p(l.exports.Fragment,{children:[n(Ln,{}),p(b,{container:!0,spacing:2,children:[n(b,{item:!0,xs:4,alignItems:"center",children:n(x,{mt:5,px:2,alignItems:"center",children:n(M,{variant:"h4",children:"Past launches"})})}),n(b,{item:!0,xs:4,alignItems:"center",children:n(x,{mt:5,px:2,alignItems:"center",children:n(M,{variant:"h4",children:"Next launches"})})}),n(b,{item:!0,xs:4,alignItems:"center",children:n(x,{mt:5,px:2,alignItems:"center",children:n(M,{variant:"h4",children:" My launches"})})})]}),p(b,{container:!0,spacing:2,mt:2,children:[n(Cn,{onCardMove:c,onColumnDrop:o,canDrop:a}),n(xn,{onCardMove:c,onColumnDrop:o,canDrop:r}),n(yn,{onCardMove:c,onColumnDrop:o,canDrop:s})]})]})},In=()=>p(Be,{children:[n(re,{exact:!0,path:"/",children:n(Dn,{})}),n(re,{exact:!0,path:"/:launchId",children:n(pn,{})})]}),bn=()=>p(Sn,{children:[n(hn,{}),n(In,{})]}),Sn=O("div")`
  width: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  & a {
    text-decoration: none;
    & .MuiCardHeader-title {
      text-decoration: underline;
    }
  }
`;Ue();Ee.render(n(l.exports.StrictMode,{children:n(zt,{children:n(st,{children:n(rt,{children:n(Gt,{children:n(tn,{children:n(Fe,{children:n(bn,{})})})})})})})}),document.getElementById("root"));
